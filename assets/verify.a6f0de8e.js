import{u as T,h as f,r as a,j as s,a as e,f as O,L as k}from"./index.e693ecd7.js";import"./cleave-phone.us.33308b54.js";import{c as b,a as c}from"./array.b94c501d.js";import{T as w}from"./Textinput.e4280276.js";import{u as q,o as S}from"./yup.module.00c394c4.js";import{a as C}from"./axios.74c9240f.js";b({email:c().email("Invalid email").required("Email is Required"),password:c().required("Password is Required")}).required();const R=b({otp:c().required("OTP is Required").length(6,"OTP must be exactly 6 characters").matches(/^[0-9]+$/,"OTP must only contain numbers")}).required(),A=o=>{const v=T(),{id:m}=f();console.log(m);const[l,d]=a.exports.useState(""),[r,u]=a.exports.useState(120),[x,h]=a.exports.useState(!0),[n,g]=a.exports.useState({enteredOTP:"",mobileNumber:m});console.log(n.email);const{register:y,formState:{errors:N},handleSubmit:j}=q({resolver:S(R)});a.exports.useEffect(()=>{const t=setInterval(P,1e3);return()=>{clearInterval(t)}},[x,r]);const P=()=>{x&&r>0?u(t=>t-1):h(!1)},p=async t=>{t.preventDefault();try{const i=await C.post("http://localhost:5001/api/verify-mob-otp",n);d(i.data),u(120),h(!0),v("/verifySuccessfully")}catch(i){d(i.response.data)}};return s("form",{className:"space-y-4 ",children:[e(w,{name:"otp",label:"email or phone OTP",type:"text",placeholder:"Enter OTP",register:y,error:N.otp,className:"h-[48px]",value:n.enteredOTP,onChange:t=>g({...n,enteredOTP:t.target.value})}),e("button",{className:"btn btn-primary block w-full text-center",onClick:t=>p(t),disabled:!r,children:"Verify OTP"}),r>0&&s("div",{className:"text-center text-gray-500",children:["Time remaining: ",Math.floor(r/60),":",r%60," minutes"]}),l&&e("div",{className:`font-normal text-base text-center px-2 py-3 mb-4 mt-10 ${l.includes("Invalid OTP")||l.includes("OTP has expired")?"text-red-500 bg-slate-100 dark:bg-slate-600":"text-green-500 bg-green-100 dark:bg-green-600"} rounded`,children:e("p",{children:l})}),e("div",{className:"md:max-w-[345px] mx-auto font-normal text-center text-slate-500 dark:text-slate-400 2xl:mt-12 mt-8 uppercase text-sm",children:e("button",{className:"text-slate-900 dark-text-white font-medium hover:underline",onClick:t=>p(t),children:"\xA0Resend OTP"})})]})},I="/assets/otp1.616d6b9c.png",F=()=>{const{email:o}=f();return O(),console.log(o),e("div",{className:"loginwrapper ",children:e("div",{className:"lg-inner-column",children:e("div",{className:"right-column relative",children:s("div",{className:"inner-content h-full flex flex-col bg-white dark:bg-slate-800",children:[s("div",{className:"auth-box2 flex flex-col justify-center h-full",children:[e("div",{className:"mobile-logo text-center mb-6  block",children:e(k,{to:"",children:e("img",{src:I,alt:"",className:"mx-auto",style:{height:"3.4rem"}})})}),s("div",{className:"text-center 2xl:mb-6 ",children:[e("h4",{className:"font-medium mb-2",children:"Verification"}),e("div",{className:"text-slate-500 dark:text-slate-400 text-base",children:"Verify Your Account with ConstroPlus."})]}),e("div",{className:"font-normal text-base text-slate-500 dark:text-slate-400 text-center px-2 bg-slate-100 dark:bg-slate-600 rounded py-3 mb-2 mt-8",children:"Please Enter the OTP provided on your Phone number and on your email for verification !"}),e(A,{email:o})]}),e("div",{className:"auth-footer text-center ",children:"Copyright 2021, ConstroPlus All Rights Reserved."})]})})})})};export{F as default};
